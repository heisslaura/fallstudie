# Fallstudie

## Setup 

1. Load the appropriate environment using following command: conda activate eotrh-analysis

**Note before starting the workflow**
Make sure the respective script is executable (if not run following command before exeuting: chmod +x [file_name].py)

## 1 Sample Metadata

1. Navigate into the appropriate directory using following command: 
2. Execute the script 01_sample-metadata.py using following command: ./01_sample-metadata.py

## 2 Obtaining and importing data

1. Navigate into the appropriate directory using following command: 
2. Execute the script 02_obtaining-and-importing-data.py using following command: ./02_obtaining-and-importing-data.py

## 3 Demultiplexing sequences

1. Navigate into the appropriate directory using following command: 
2. Execute the script 03_demultiplexing-sequences.py using following command: ./03_demultiplexing-sequences.py
3. Download the generated file "demux-summary.qzv" from project/outputs/03_quality and open it in your browser (https://view.qiime2.org). 
    a. Download of files was not possible, therefore pdf files from the website is saved in project/reports

## 4 Sequence quality control and feature table construction
### 4.1 qiime dada2 

1. Review the interactive quality plot tab in the "demux-summary.qzv" file that was generated by qiime demux summarize in step 3. 
    a. Analyze the reports 
        1. Sequence Coverage
            - all 23 samples imported successfully
            - Range: 4012 to 79,184 sequences per sample
            - Median: ~65,675 sequences per sample
            - good coverage for analysis
        b. Sequence Length
            - all sequences are 301 bp (both fw and rv)
        c. Quality Scores 
            - Forward Reads
                - Quality stays high (Q35-48) until position 270-280
                - by position 280-300, quality drops to Q10-15
            - Reverse Reads
                - Quality stays high (Q35-38) until around position 230-240
                - after position 250, quality drops even more drastic than fw
2. Determine optimal cutoffs for next step (feature table construction)
    a. --p-trim-left m (trims off the first m bases of each sequence)
        - FW: 0
        - RV: 0 
    b. --p-trunc-len n (truncates each sequence at position n)
        - FW: 270 
        - RV: 240 
3. Navigate into the appropriate directory using following command: 
4. Execute the script 04.1_dada2.py using following command: ./04.1_dada2.py
    a. This script may take very long (9+ hours in my case), if you would like to run it overnight, you can use following command instead: nohup ./04.1_dada2.py > ~/dada2.log 2>&1 &
5. Execute the script 04.1_dada2-metadata.py using following command: ./04.1_dada2-metadata.py
    a. Download the generated file "denoising-stats.qzv" from project/outputs/04_denoising and open it in your browser (https://view.qiime2.org). 
        - Download of files was not possible, therefore pdf file from the website is saved in project/reports

    



